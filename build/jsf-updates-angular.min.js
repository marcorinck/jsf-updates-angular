/**
 * jua - v0.1.0 - 2014-11-02
 * https://github.com/marcorinck/jsf-updates-angular
 * Copyright (c) 2014 Marco Rinck; Licensed MIT
 */
!function(a,b,c,d){"use strict";function e(a){return"#"+a.replace(/:/g,"\\:")}function f(a){return function(b){"begin"===b.status&&k.push(a)}}function g(a){k.push(a)}function h(a){l?k.push(a):a()}function i(c){var f=c.responseXML.getElementsByTagName("update");f&&f.forEach(function(c){var f,g,h=e(c);h.contains("ViewState")||(f=d.getElementById(h),g=f.querySelectorAll(".ng-scope, .ng-isolated-scope"),g.forEach(function(c){a.jua.debug&&console.log("destroying child scope for element",c),b.element(c.firstChild).scope().$destroy()}))})}function j(c){a.setTimeout(function(){var f=b.element(d).injector().get("$compile"),g=c.responseXML.getElementsByTagName("update");g&&g.forEach(function(c){var g,h=e(c);h.contains("ViewState")||(g=b.element(d.getElementById(h)),g&&(a.jua.debug&&console.log("compiling angular element",g),f(g)(g.scope())))}),k.length&&(k.forEach(function(a){a()}),k=[])})}var k=[],l=!1;a.addEventListener("load",function(){c&&c.ajax.addOnEvent(function(a){"begin"===a.status&&(l=!0,k=[]),"complete"===a.status&&i(a),"success"===a.status&&(j(a),l=!1)})}),a.jua={onComplete:g,onCompleteEvent:f,ensureExecutionAfterAjaxRequest:h,get requestOngoing(){return l}}}(window,angular,jsf,document);