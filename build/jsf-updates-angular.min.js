/**
 * jua - v0.1.0 - 2014-11-02
 * https://github.com/marcorinck/jsf-updates-angular
 * Copyright (c) 2014 Marco Rinck; Licensed MIT
 */
!function(a,b,c,d){"use strict";function e(){}function f(a){return function(b){"begin"===b.status&&j.push(a)}}function g(a){j.push(a)}function h(c){var f=c.responseXML.getElementsByTagName("update");f&&f.forEach(function(c){var f,g,h=e(c);h.contains("ViewState")||(f=d.getElementById(h),g=f.querySelectorAll(".ng-scope, .ng-isolated-scope"),g.forEach(function(c){a.jua.debug&&console.log("destroying child scope for element",c),b.element(c.firstChild).scope().$destroy()}))})}function i(c){a.setTimeout(function(){var f=b.element(d).injector().get("$compile"),g=c.responseXML.getElementsByTagName("update");g&&g.forEach(function(c){var g,h=e(c);h.contains("ViewState")||(g=b.element(d.getElementById(h)),g&&(a.jua.debug&&console.log("compiling angular element",g),f(g)(g.scope())))}),j.length&&(j.forEach(function(a){a()}),j=[])})}var j=[];a.addEventListener("load",function(){c&&c.ajax.addOnEvent(function(a){"begin"===a.status&&(j=[]),"complete"===a.status&&h(a),"success"===a.status&&i(a)})});var k={onComplete:g,onCompleteEvent:f};"undefined"!=typeof a.module&&a.module.exports?a.module.exports=k:"function"==typeof a.define&&a.define.amd?a.define("jua",function(){return k}):a.jua=k}(window,angular,jsf,document);