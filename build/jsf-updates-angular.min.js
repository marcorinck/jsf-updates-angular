/**
 * jua - v0.1.0 - 2014-12-08
 * https://github.com/marcorinck/jsf-updates-angular
 * Copyright (c) 2014 Marco Rinck; Licensed MIT
 */
!function(a,b){"use strict";function c(a){return"#"+a.replace(/:/g,"\\:")}function d(a){return function(b){"complete"===b.status&&l.push(a)}}function e(a){l.push(a)}function f(a){m?l.push(a):a()}function g(b){var c,d;if(b&&b.length)for(d=b.length,c=0;d>c;c++)a.jua.debug&&console.log("destroying child scope for element",b[c]),j.element(b[c].firstChild).scope().$destroy()}function h(a){var d,e,f=a.responseXML.getElementsByTagName("update"),h=f.length;for(d=0;h>d;d++)e=c(f[d].id),e.contains("ViewState")||g(b.querySelector(e).querySelectorAll(".ng-scope, .ng-isolate-scope"))}function i(d){a.setTimeout(function(){var e,f,g,h=j.element(b).injector().get("$compile"),i=d.responseXML.getElementsByTagName("update"),k=i.length;for(e=0;k>e;e++)f=c(i[e].id),f.contains("ViewState")||(g=j.element(b.querySelector(f)),g&&(a.jua.debug&&console.log("compiling angular element",g),h(g)(g.scope())));l.length&&(l.forEach(function(a){a()}),l=[])})}var j,k,l=[],m=!1;k=a.jsf,j=a.angular,k&&j?(k.ajax.addOnEvent(function(a){"begin"===a.status&&(m=!0,l=[]),"complete"===a.status&&h(a),"success"===a.status&&(i(a),m=!1)}),a.jua={onComplete:e,onCompleteEvent:d,ensureExecutionAfterAjaxRequest:f,get requestOngoing(){return m}}):console&&console.warn&&console.warn("jsf-updates-angular: no jsf javascript or no angular found. Doing nothing.")}(window,document);