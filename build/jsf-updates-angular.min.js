/**
 * jua - v0.1.0 - 2014-11-03
 * https://github.com/marcorinck/jsf-updates-angular
 * Copyright (c) 2014 Marco Rinck; Licensed MIT
 */
!function(a,b,c,d,e){"use strict";function f(a){return"#"+a.replace(/:/g,"\\:")}function g(a){return function(b){"begin"===b.status&&l.push(a)}}function h(a){l.push(a)}function i(a){m?l.push(a):a()}function j(c){var d=c.responseXML.getElementsByTagName("update");e.each(d,function(c,d){var g=f(d.id);g.contains("ViewState")||e(g).find(".ng-scope, .ng-isolate-scope").each(function(c,d){a.jua.debug&&console.log("destroying child scope for element",d),b.element(d.firstChild).scope().$destroy()})})}function k(c){a.setTimeout(function(){var g=b.element(d).injector().get("$compile"),h=c.responseXML.getElementsByTagName("update");e.each(h,function(c,d){var h,i=f(d.id);i.contains("ViewState")||(h=b.element(e(i)),h&&a.jua.debug&&console.log("compiling angular element",h),g(h)(h.scope()))}),l.length&&(l.forEach(function(a){a()}),l=[])})}var l=[],m=!1;c.ajax.addOnEvent(function(a){"begin"===a.status&&(m=!0,l=[]),"complete"===a.status&&j(a),"success"===a.status&&(k(a),m=!1)}),a.jua={onComplete:h,onCompleteEvent:g,ensureExecutionAfterAjaxRequest:i,get requestOngoing(){return m}}}(window,angular,jsf,document,jQuery);